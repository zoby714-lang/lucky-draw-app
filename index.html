<!DOCTYPE html>
<html lang="ur" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>DailyQurrah | ฺู ูุฑุน</title>
  <link rel="stylesheet" href="styles.css" />
  <link rel="preconnect" href="https://www.gstatic.com" crossorigin>
</head>
<body>
  <!-- Top Bar -->
  <header class="topbar">
    <div class="brand">
      <span class="logo">๐ฏ</span>
      <h1>DailyQurrah</h1>
      <small>โ ฺฉููน ุจุณ ฺุฑุง ุงูพ</small>
    </div>

    <nav class="nav">
      <a href="index.html" class="active">ูู</a>
      <a href="signup.html" id="nav-signup">ุณุงุฆู ุงูพ</a>
      <a href="login.html" id="nav-login">ูุงฺฏ ุงูู</a>
      <button id="nav-logout" class="btn danger" style="display:none">ูุงฺฏ ุขุคูน</button>
    </nav>
  </header>

  <!-- Auth Notice -->
  <div id="auth-banner" class="banner info">
    ุจุฑุงู ฺฉุฑู ูพู <a href="signup.html">ุณุงุฆู ุงูพ</a> ุง <a href="login.html">ูุงฺฏ ุงูู</a> ฺฉุฑฺบ ุชุงฺฉ ุขูพ ุงูพู ฺฉููน ุฌูุน ฺฉุฑ ุณฺฉฺบ
  </div>

  <!-- Main -->
  <main class="container">
    <!-- Stats / Hero -->
    <section class="card hero">
      <div>
        <h2>ุฎูุด ุขูุฏุฏ!</h2>
        <p>
          ุงููุณูนูููน ููฺู ุฑูุฒุงู <b>10:00 PM</b> ุณ <b>6:00 PM</b> ุชฺฉ ฺฉฺพู ุฑุช   
          ูุฑุน ุงูุฏุงุฒ ุฑูุฒุงู <b>8:00 PM</b> ูพุฑ ูุช  โ ูฺ ฺฉุงุคููน ฺุงุคู ุฏฺฉฺพฺบ
        </p>
        <div class="badges">
          <span class="badge">ฺฉู ุงุฒ ฺฉู ฺฉููน: 200</span>
          <span class="badge">ุฒุงุฏ ุณ ุฒุงุฏ: ู ููุจุฑ 10 ฺฉููนุงฺบ</span>
          <span class="badge">ุณุฑูุณ ูุณ: 10%</span>
        </div>
      </div>
      <div class="countdown">
        <h3>ุงฺฏูุง ฺุฑุง ฺฉุงุคููน ฺุงุคู</h3>
        <div id="countdown" class="timer">--:--:--</div>
        <small>ุฑูุฒุงู ุดุงู 8:00 ุจุฌ</small>
      </div>
    </section>

    <!-- Actions -->
    <section class="grid2">
      <div class="card">
        <h3>ฺูพุงุฒูน (ฺฉููน ฺุงูฺบ)</h3>
        <p>ฺฉู ุงุฒ ฺฉู 200 โ ูู ุฏู ููฺฉ ฺฉ ุฐุฑุน ู ฺฏุง</p>
        <button id="btn-deposit" class="btn primary">ฺูพุงุฒูน</button>
      </div>

      <div class="card">
        <h3>ููุฏฺุฑุง (ููุฑ/ูุงููน)</h3>
        <p>ุฑูู ฺฉ ุงุฏุงุฆฺฏ ูุฑูฺฉุดู ฺฉ ุจุนุฏ โ ุงุฒ ูพุณ/ุฌุงุฒ ฺฉุด</p>
        <button id="btn-withdraw" class="btn primary">ููุฏฺุฑุง</button>
      </div>
    </section>

    <!-- Live Draw (Dummy View for now) -->
    <section class="card">
      <h3>ูุงุฆู ูุฑุน ุงูุฏุงุฒ (ฺูู ูู)</h3>
      <p>ฺฉุณูนูุฑุฒ ฺฉ ูุงู/ููุจุฑ ูพุฑุงุฆูุณ ฺฉ ู ุณูนุงุฑ ฺฉ ุณุงุชฺพ:</p>
      <ul class="list">
        <li>Ali K*** โ 03******45</li>
        <li>Sara M*** โ 03******12</li>
        <li>Usman H*** โ 03******78</li>
        <li>Hina A*** โ 03******33</li>
      </ul>
      <button id="btn-see-live" class="btn">ูุงุฆู ุฏฺฉฺพฺบ</button>
    </section>

    <!-- Rules -->
    <section class="card">
      <h3>ุงุตูู ู ุถูุงุจุท</h3>
      <ul class="list">
        <li>ุงููุณูนูููน ููฺู: ุฑูุฒุงู <b>10:00 PM โ 6:00 PM</b></li>
        <li>ูุฑุน ุงูุฏุงุฒ: ุฑูุฒุงู <b>8:00 PM</b></li>
        <li>ฺฉู ุงุฒ ฺฉู ฺฉููน: <b>200</b> (200 ูพุฑ 2000 ูููฺฏ)</li>
        <li>ุงฺฉ ููุจุฑ/ุง ูู ูพุฑ ุฒุงุฏ ุณ ุฒุงุฏ <b>10</b> ฺฉููนุงฺบ</li>
        <li>ุชูุงู ุงุฏุงุฆฺฏุงฺบ ููฺฉ ฺฉ ุฐุฑุน (ุงุฒ ูพุณ/ุฌุงุฒ ฺฉุด) โ <b>10% ุณุฑูุณ ูุณ</b></li>
      </ul>
    </section>
  </main>

  <footer class="footer">
    <small>ยฉ 2025 DailyQurrah โ All rights reserved.</small>
  </footer>

  <!-- Firebase (modular CDN v10) -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
    import { getDatabase } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";

    // โ ุงูพู ุงุตู Firebase config ุงฺบ ฺุงูฺบ (Project Settings โ Web app)
    const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
      databaseURL: "https://YOUR_PROJECT_ID-default-rtdb.firebaseio.com",
      projectId: "YOUR_PROJECT_ID",
      storageBucket: "YOUR_PROJECT_ID.appspot.com",
      messagingSenderId: "YOUR_SENDER_ID",
      appId: "YOUR_APP_ID"
    };

    // Init
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getDatabase(app);

    // UI elements
    const banner = document.getElementById('auth-banner');
    const logoutBtn = document.getElementById('nav-logout');
    const navLogin = document.getElementById('nav-login');
    const navSignup = document.getElementById('nav-signup');

    // Auth guard (show/hide)
    onAuthStateChanged(auth, (user) => {
      if (user) {
        banner.classList.remove('info');
        banner.classList.add('success');
        banner.innerHTML = `ุฎูุด ุขูุฏุฏ: <b>${user.email}</b> โ ุขูพ ฺูพุงุฒูน/ููุฏฺุฑุง ุจูนู ุงุณุชุนูุงู ฺฉุฑ ุณฺฉุช ฺบ`;
        logoutBtn.style.display = 'inline-flex';
        navLogin.style.display = 'none';
        navSignup.style.display = 'none';
      } else {
        banner.classList.remove('success');
        banner.classList.add('info');
        banner.innerHTML = `ุจุฑุงู ฺฉุฑู ูพู <a href="signup.html">ุณุงุฆู ุงูพ</a> ุง <a href="login.html">ูุงฺฏ ุงูู</a> ฺฉุฑฺบ ุชุงฺฉ ุขูพ ุงูพู ฺฉููน ุฌูุน ฺฉุฑ ุณฺฉฺบ`;
        logoutBtn.style.display = 'none';
        navLogin.style.display = 'inline-flex';
        navSignup.style.display = 'inline-flex';
      }
    });

    // Logout
    logoutBtn?.addEventListener('click', async () => {
      await signOut(auth);
      alert('ุขูพ ูุงฺฏ ุขุคูน ู ฺฺฉ ฺบ');
      location.href = 'index.html';
    });

    // Deposit / Withdraw buttons (verification message)
    const depositBtn = document.getElementById('btn-deposit');
    const withdrawBtn = document.getElementById('btn-withdraw');
    const seeLiveBtn = document.getElementById('btn-see-live');

    function requireAuthThenMsg(msg) {
      const user = auth.currentUser;
      if (!user) {
        alert('ุจุฑุงู ฺฉุฑู ูพู ูุงฺฏ ุงูู ฺฉุฑฺบ');
        location.href = 'login.html';
        return;
      }
      alert(msg);
    }

    depositBtn?.addEventListener('click', () => {
      requireAuthThenMsg('ุงุนุชูุงุฏ ฺฉุง ุดฺฉุฑ โ ุงุฏุงุฆฺฏ ุงูุฑ ูุฑุน ุงูุฏุงุฒ ุขูพ ฺฉ ุฑุฌุณูนุฑุดู ฺฉ ุชุตุฏู ฺฉ ุจุนุฏ ูฺฏ');
    });

    withdrawBtn?.addEventListener('click', () => {
      requireAuthThenMsg('ูุฑูฺฉุดู ฺฉ ุจุนุฏ ููุฏฺุฑุง ฺฉ ุณููุช ูุณุฑ ูฺฏ ุดฺฉุฑ!');
    });

    seeLiveBtn?.addEventListener('click', () => {
      alert('ูุงุฆู ูุฑุน ุงูุฏุงุฒ 8:00 PM ูพุฑ ุดุฑูุน ูฺฏ');
    });

    // Countdown to 8 PM (local)
    const countdownEl = document.getElementById('countdown');
    function next8pm() {
      const now = new Date();
      const target = new Date();
      target.setHours(20, 0, 0, 0); // 8:00 PM
      if (target <= now) target.setDate(target.getDate() + 1);
      return target;
    }
    function updateCountdown() {
      const t = next8pm() - new Date();
      const h = String(Math.floor(t / (1000*60*60))).padStart(2,'0');
      const m = String(Math.floor((t % (1000*60*60)) / (1000*60))).padStart(2,'0');
      const s = String(Math.floor((t % (1000*60)) / 1000)).padStart(2,'0');
      countdownEl.textContent = `${h}:${m}:${s}`;
    }
    updateCountdown();
    setInterval(updateCountdown, 1000);
  </script>
</body>
</html>
